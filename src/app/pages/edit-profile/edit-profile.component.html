<main>
  <div class="form-container">
    <h1>Modifier mon Profil</h1>
    <form [formGroup]="editProfileForm" (ngSubmit)="onSubmit()" #editProfileStatus="ngForm">
      <fieldset>
        <label for="lastname">Nom</label>
        <input
          type="text"
          name="lastname"
          id="lastname"
          formControlName="lastname"
          placeholder="Nom"
          autocomplete="family-name"
          readonly
        />
      </fieldset>

      <fieldset>
        <label for="firstname">Prénom</label>
        <input
          type="text"
          name="firstname"
          id="firstname"
          formControlName="firstname"
          placeholder="Prénom"
          autocomplete="given-name"
          readonly
        />
      </fieldset>

      <fieldset>
        <label for="phone">Téléphone</label>
        <input id="phone" formControlName="phone" type="text" autocomplete="tel"/>
        <div *ngIf="editProfileForm.get('phone')?.invalid && editProfileForm.get('phone')?.touched">
          <small *ngIf="editProfileForm.get('phone')?.errors?.['required']">Le téléphone est requis.</small>
          <small *ngIf="editProfileForm.get('phone')?.errors?.['phoneFormat']">Numéro de téléphone invalide.</small>
        </div>
      </fieldset>

      <fieldset>
        <label for="address">Adresse</label>
        <input
          id="address"
          formControlName="address"
          type="search"
          placeholder="Adresse"
          autocomplete="street-address"
        />
        <div *ngIf="editProfileForm.get('address')?.invalid && editProfileForm.get('address')?.touched">
          <small *ngIf="editProfileForm.get('address')?.errors?.['required']">L'adresse est requise.</small>
          <small *ngIf="editProfileForm.get('address')?.errors?.['minlength']">L'adresse doit contenir au moins 5 caractères.</small>
        </div>

        <ul *ngIf="addressSuggestions.length > 0">
          <li
            *ngFor="let suggestion of addressSuggestions; let i = index"
            (click)="selectAddress(suggestion)"
          >
            {{ suggestion.properties.label }}
          </li>
        </ul>
      </fieldset>

      <fieldset>
        <label for="email">Email</label>
        <input
          type="email"
          id="email"
          formControlName="email"
          placeholder="Email"
          autocomplete="email"
          readonly
        />
      </fieldset>
      <div class="buttons-container">
        <button class="back-button" (click)="goBack()">
          Annuler
        </button>
        <button type="submit">Valider les modifications</button>
      </div>
      
    </form>
  </div>
</main>

